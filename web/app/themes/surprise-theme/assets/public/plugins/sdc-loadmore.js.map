{"version":3,"sources":["sdc-loadmore.js"],"names":["document","addEventListener","clickLoadmore","btn","getElementById","page","url","cat","wrapp","paginator","window","location","pathname","pageNum","querySelectorAll","data","action","post_type","first_page","surprise_ajax_params","params","URLSearchParams","postData","ajaxurl","then","innerHTML","current_page","history","pushState","href","forEach","num","isQuery","indexOf","substring","search","remove","insertAdjacentHTML","catch","error","console","ajaxLoadPosts","dataset","querySelector","log"],"mappings":"AAGAA,SAASC,iBAAiB,mBAAoB,KAS5C,SAASC,IACP,IAAIC,EAAMH,SAASI,eAAe,YAC9BD,GACFA,EAAIF,iBAAiB,QAAS,MAOlC,SAAuBI,EAAO,EAAGC,EAAM,GAAIC,EAAM,IAC/C,IAAIC,EAAQR,SAASI,eAAe,qBAClCK,EAAYT,SAASI,eAAe,mBAC3BM,OAAOC,SAASC,SAG3BC,QAAUb,SAASc,iBAAiB,iBAEpCC,KAAO,CACLC,OAAU,WACVC,UA5Ba,OA6BbZ,KAAQA,EACRE,IAAQA,EACRW,WAAcC,qBAAqBD,YAErCE,OAAS,IAAIC,gBAAgBN,MAC7BO,SAASH,qBAAqBI,QAASH,QACpCI,KAAKT,IAEQ,GAARV,GAEFG,EAAMiB,UAAYV,EAElBI,qBAAqBO,aAAe,EAGpChB,OAAOiB,QAAQC,UAAU,GAAI,GAAIlB,OAAOC,SAASkB,MAEjDhB,QAAUb,SAASc,iBAAiB,iBACpCD,QAAQiB,QAAQC,IACd,IAAIzB,EAAMyB,EAAIF,KACZG,EAAU1B,EAAI2B,QAAQ,KAAO,EAK7BF,EAAIF,KADFG,EACS1B,EAAI4B,UAAU,EAAG5B,EAAI2B,QAAQ,MAAQvB,OAAOC,SAASwB,OAErD7B,EAAM,IAAMI,OAAOC,SAASwB,SAI3CjC,MAIAO,EAAU2B,SAEV5B,EAAM6B,mBAAmB,YAAatB,GAClCV,EAAO,GACTK,OAAOiB,QAAQC,UAAU,GAAI,GAAItB,GAGnCJ,OAMHoC,MAAMC,GAASC,QAAQD,MAAM,MAAOA,IAjEnCE,GAAgBtB,qBAAqBO,aAAcvB,EAAIuC,QAAQrC,KAAMF,EAAIuC,QAAQnC,OAXnFP,SAAS2C,cAAc,sBACzBzC,IAEAsC,QAAQI,IAAI","file":"sdc-loadmore.js","sourcesContent":["/**\r\n * Loadmore Posts Plugin\r\n */\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const postType = 'post';\r\n  if (document.querySelector('.blog-latest-posts')) {\r\n    clickLoadmore();\r\n  } else {\r\n    console.log('Tets')\r\n  }\r\n\r\n  // LOADMORE BUTTON\r\n  function clickLoadmore() {\r\n    let btn = document.getElementById('loadmore');\r\n    if (btn) {\r\n      btn.addEventListener('click', () => {\r\n        ajaxLoadPosts(++surprise_ajax_params.current_page, btn.dataset.page, btn.dataset.cat);\r\n      });\r\n    }\r\n  }\r\n\r\n  // AJAX LOAD POSTS\r\n  function ajaxLoadPosts(page = 1, url = '', cat = '') {\r\n    let wrapp = document.getElementById('blog-latest-posts'),\r\n      paginator = document.getElementById('post_pagination'),\r\n      curLoc = window.location.pathname,\r\n      nextLoc,\r\n      taxonomy = (postType == 'post') ? 'blog' : postType;\r\n    pageNum = document.querySelectorAll('a.page-number');\r\n    // cat = postFilter.dataset.select;\r\n    data = {\r\n      'action': 'loadmore',\r\n      'post_type': postType,\r\n      'page': page,\r\n      'cat' : cat,\r\n      'first_page': surprise_ajax_params.first_page\r\n    }\r\n    params = new URLSearchParams(data);\r\n    postData(surprise_ajax_params.ajaxurl, params)\r\n      .then(data => {\r\n        // Once a New Category Has Been Selected\r\n        if (page == 1) {\r\n          // Input Post Data into Page\r\n          wrapp.innerHTML = data;\r\n          // Set Current Page Number\r\n          surprise_ajax_params.current_page = 1;\r\n          // Change Browser Url\r\n\r\n          window.history.pushState({}, \"\", window.location.href);\r\n          // Change Page Pagination Link\r\n          pageNum = document.querySelectorAll('a.page-number');\r\n          pageNum.forEach(num => {\r\n            let url = num.href,\r\n              isQuery = url.indexOf('?') > 0 ? true : false;\r\n            // If Recently We Have Query Parameters in Pagination Links,\r\n            // We Have to Remove it in Page Number Link\r\n            // Then Add New Category to Query Parameters\r\n            if (isQuery) {\r\n              num.href = url.substring(0, url.indexOf('?')) + window.location.search\r\n            } else {\r\n              num.href = url + '/' + window.location.search\r\n            }\r\n          });\r\n          // Add Listener For Loadmore Button\r\n          clickLoadmore();\r\n          // Current page !== 1\r\n        } else {\r\n          // Remove Default Post Pagination\r\n          paginator.remove();\r\n          // Input Post Data into Page\r\n          wrapp.insertAdjacentHTML('beforeEnd', data);\r\n          if (page > 1) {\r\n            window.history.pushState({}, \"\", url);\r\n          }\r\n          // Add Listener For Loadmore Button\r\n          clickLoadmore();\r\n        }\r\n        // After all Posts Have Been Loaded Hide Preloader\r\n        // document.getElementById('preloader').classList.add('hidden');\r\n        // document.getElementById('preloader').classList.remove('visible');\r\n      })\r\n      .catch(error => console.error('Err', error));\r\n  }\r\n\r\n});"]}